<!DOCTYPE html>
<html ng-cloak ng-app="myApp">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta charset="utf-8"/>
    <title>Monitoring Optimization Software  using Seed Viability Estimation</title>
    <link type="text/css" rel="stylesheet"
          href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css"/>
    <link type="text/css" rel="stylesheet" href="lib/css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="lib/css/font-awesome.min.css"/>
    <link type="text/css" rel="stylesheet" href="lib/ui-select/ui-select.css"/>
    <!--<link type="text/css" rel="stylesheet" href="lib/autocomplete/autocomplete.css"/>-->
    <link href="style.css" rel="stylesheet"/>
    <!--[if lt IE 9]>
    <script src="/js/libs/es5-shim.min.js" type="text/javascript"></script>
    <script src="/js/libs/respond.min.js" type="text/javascript"></script>
    <![endif]-->
</head>

<body ng-controller="MainController as mainVm" ng-cloak>

<div class="container" style="height: 100%">
    <div ng-show="!organization">
        <div class="alert alert-info text-center" role="alert" style="margin: 50px">
            <strong style="font-size: 1.6em">Monitoring Optimization Software  using Seed Viability Estimation</strong>
        </div>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <div class="row">
                    <div class="col-md-9">
                        <form name="organizationForm">
                            <div class="form-group-lg">
                                <input type="text" ng-model="organizationName" ng-minlength="1" class="form-control"
                                       id="organizationName" placeholder="Organization name">
                            </div>
                        </form>
                    </div>
                    <div class="col-md-3">
                        <button type="submit" class="btn btn-primary btn-lg btn-block"
                                ng-click="saveOrganization(organizationName)"
                                ng-disabled="!organizationForm.organizationName.$valid && !organizationName">Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div ng-show="organization" class="animationIf">
        <div class="alert alert-info text-center" role="alert" style="margin: 50px">
            <strong style="font-size: 1.6em">Monitoring Optimization Software  using Seed Viability Estimation</strong>
        </div>
        <div class="text-right" style="margin: 10px 0">
            <span style="font-size: 1.6em; color: #9d9d9d">{{organization}} </span>
            <button ng-click="deleteOrganization()" class="btn btn-xs" style="margin:0 0 12px 10px"><i
                    class="fa fa-minus"></i></button>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Seed Information</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">

                            <div class="col-md-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Species</div>
                                    <div class="panel-body">

                                        <div class="row">

                                            <div class="col-md-4">
                                                <h5>Family</h5>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" ng-model="data.name1"
                                                               uib-typeahead="item for item in family | filter:$viewValue | limitTo:8"
                                                               class="form-control">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <h5>Genus</h5>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" ng-model="data.name2"
                                                               uib-typeahead="item for item in genus | filter:$viewValue:startsWith | limitTo:8"
                                                               typeahead-select-on-exact="true"
                                                               typeahead-show-hint="true"
                                                               typeahead-min-length="0"
                                                               class="form-control">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <h5>Epithet</h5>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" ng-model="data.name3" placeholder="Epithet"
                                                               class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-md-4">
                                                <h5></h5>
                                                <div class="row">
                                                    <div class="col-md-12">

                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <h5>Variance</h5>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <select class="form-control" ng-model="data.name4"
                                                                ng-options="key as value for (key , value) in varNames"
                                                                ng-change="varNameChanged()"></select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <h5>변종소명</h5>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" ng-model="data.name5" placeholder="변종소명"
                                                               class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                               </div>
                            </div>

                        </div>

                        <div>
                            <hr>
                        </div>


                        <div class="row">
                            <div class="col-md-4">
                                <h5>Moisture content</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" ng-model="data.waterValue" placeholder=""
                                               class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h5>Storage temp. (°C)</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" ng-model="data.inventoryCondition" placeholder=""
                                               class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <h5>Date</h5>
                                <div class="row">
                                    <div class="span5 col-md-12" id="sandbox-container">
                                        <input type="text" class="form-control" data-date-format="yyyy.mm.dd"
                                               ng-model="data.inventoryDate">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h5>Weight</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control" ng-model="data.weight"
                                               ng-blur="calculateLipCount()">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h5>1000 seed weight</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control"
                                               ng-model="data.kiloLipWeight" ng-blur="calculateLipCount()">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h5>Seed quantity</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control" readonly
                                               ng-model="data.lipCount">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2 col-sm-2 col-xs-12">
                                <h5>Viability</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control"
                                               ng-model="data.inventoryPower">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-right">
                            <div class="col-md-9"></div>
                            <div class="col-md-3">
                                <button class="btn btn-success btn-block btn-lg" type="button" ng-click="calculate()">
                                    Calculate
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Estimating seed equilibrium</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <h5>Oil content</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control"
                                               ng-model="data.groundValue">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <h5>Ref.&nbsp;</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <select class="form-control" ng-model='data.groundValue'
                                                ng-options='item.oil as item.name for item in oilData'>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <h5>Drying temp.(°C)</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control"
                                               ng-model="data.dryTemperature">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <h5>Equilibrium RH(%)</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control"
                                               ng-model="data.dryHumidity">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <h5>Moisture content(%)</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <input type="text" placeholder="" class="form-control" readonly
                                               ng-model="data.resultWaterValue">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">

                            <button class="btn btn-success" style="margin-top: 5px" type="button"
                                    ng-click="calculateWaterValue()">Calculate
                            </button>
                        </div>

                        <hr ng-show="oilWaters">
                        <div id="container_oil"></div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Results</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-9 col-sm-9 col-xs-12">
                                <h4>Seed viability constant : <span
                                        style="font-size: 0.9em; padding: 0px 10px; margin-left: 10px">{{seedName}}</span>
                                </h4>
                                <div class="row">
                                    <div class="col-md-6 text-center">
                                        <select ng-model="mySeed" class="form-control"
                                                ng-options="seed.name for seed in seedData">
                                            <option value="">-- select --</option>
                                        </select>

                                    </div>
                                    <div class="col-md-6 text-right">
                                        <button class="btn btn-info btn-sm" ng-click="data.Ch=0.0329; data.Cq=0.000478">
                                            Apply universal constant value for Ch and Cq
                                        </button>
                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>Ke</label>
                                        <input type="text" ng-model="data.Ke" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>Cw</label>
                                        <input type="text" ng-model="data.Cw" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>Ch</label>
                                        <input type="text" ng-model="data.Ch" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>Cq</label>
                                        <input type="text" ng-model="data.Cq" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>Sigma (Day)</label>
                                        <input type="text" ng-model="data.sigmaDay" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>P90 (Day)</label>
                                        <input type="text" ng-model="data.p90Day" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>P85 (Day)</label>
                                        <input type="text" ng-model="data.p85Day" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>P80 (Day)</label>
                                        <input type="text" ng-model="data.p80Day" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>Sigma (Year)</label>
                                        <input type="text" ng-model="data.sigmaYear" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>P90 (Year)</label>
                                        <input type="text" ng-model="data.p90Year" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>P85 (Year)</label>
                                        <input type="text" ng-model="data.p85Year" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>P80 (Year)</label>
                                        <input type="text" ng-model="data.p80Year" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 form-group">
                                        <label>P90-P85</label>
                                        <input type="text" ng-model="data.p90_P85" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>P85-P80</label>
                                        <input type="text" ng-model="data.p85_P80" placeholder="" class="form-control"
                                               readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>monitoring period(day)</label>
                                        <input type="text" ng-model="data.monitoringDay" placeholder=""
                                               class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>test seed count </label>
                                        <input type="text" ng-model="data.testLipCount" placeholder=""
                                               class="form-control"
                                               readonly>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12 form-group">
                                        <label>monitoring condition</label>
                                        <input type="text" ng-model="data.monitoringCondition" placeholder=""
                                               class="form-control" readonly>
                                    </div>


                                </div>

                                <div class="row">
                                    <div class="col-md-3 col-md-offset-9">
                                        <button class="btn btn-success btn-block btn-lg" type="button"
                                                ng-click="calculate()">
                                            Calculate
                                        </button>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-12" style="margin-top: 30px;">
                                        <div id="container_seed"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-12">
                                <h5>&nbsp;</h5>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 form-group">
                                        <label>monitoring table</label>
                                        <div class="pull-right">
                                            <button class="btn btn-success btn-xs" ng-click="exportJsonToCsv()">CSV
                                                export
                                            </button>
                                        </div>
                                        <table class="table">
                                            <tr>
                                                <th>#</th>
                                                <th>date</th>
                                                <th>viability(% est.)</th>
                                                <th>%</th>
                                            </tr>
                                            <tr ng-if="$index <= (selectedMonitoringData.monitoringCount)"
                                                ng-repeat="item in data.monitoringDateList">
                                                <td>{{$index}}</td>
                                                <td>{{item.date}}</td>
                                                <td>{{item.power | number:2}}</td>
                                                <td>{{item.percent | number:1}}</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div ng-show="seed.scaled" class="row">

                            <hr>
                            <div class="col-md-6 col-md-offset-3">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Search</h3>
                                    </div>
                                    <div class="panel-body">
                                        <div class="col-md-5">
                                            <h4 class="text-muted">Keywords</h4>
                                            <!--<hr>-->
                                            <div class="checkbox" ng-repeat="keyword in keywords track by $index">
                                                <label>
                                                    <input
                                                            type="checkbox"
                                                            name="selectedKeywords[]"
                                                            value="{{keyword}}"
                                                            ng-checked="selection.indexOf(keyword) > -1"
                                                            ng-click="toggleSelection(keyword)"
                                                            ng-disabled="$index == 0"
                                                    > {{keyword}}
                                                </label>
                                            </div>
                                            <div class="input-group">
                                                <input type="text" class="form-control" ng-model="keyword"
                                                       placeholder="add keyword">
                                                <span class="input-group-btn">
                                            <button class="btn btn-default" type="button"
                                                    ng-click="addKeyword(keyword)">
                                                <i class="fa fa-plus" aria-hidden="true"></i>
                                            </button>
                                        </span>
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <h4 class="text-muted">Search site</h4>
                                            <div class="radio">
                                                <label>
                                                    <input type="radio" ng-model="site.name"
                                                           value="Google Scholar Search">
                                                    Google Scholar Search
                                                </label>
                                            </div>
                                            <div class="radio">
                                                <label>
                                                    <input type="radio" ng-model="site.name" value="Google Search">
                                                    Google Search
                                                </label>
                                            </div>
                                            <div class="radio">
                                                <label>
                                                    <input type="radio" ng-model="site.name"
                                                           value="Google Image Search">
                                                    Google Image Search
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <button type="button" class="btn btn-success"
                                                    style="margin-top: 0px;"
                                                    ng-click="search()">Search
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                    </div>
                </div>
            </div>
        </div>


    </div>
</div>



<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-warning">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">데이터 입력오류</h4>
            </div>
            <div class="modal-body">
                {{modalMessage}}
            </div>
            <!--<div class="modal-footer">-->
            <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
            <!--&lt;!&ndash;<button type="button" class="btn btn-primary">Save changes</button>&ndash;&gt;-->
            <!--</div>-->
        </div>
    </div>
</div>


<script src="lib/js/jquery-latest.js"></script>
<script src="lib/js/jquery-migrate-1.2.1.min.js"></script>
<script src="lib/js/jquery-ui-latest.js"></script>
<script src="lib/js/d3.v3.min.js"></script>
<script src="lib/js/bootstrap.min.js"></script>


<!--<script src="lib/js/angular.js"></script>-->
<!--<script src="lib/js/angular-sanitizer.js"></script>-->
<!--<script src="lib/js/angular-animate.js"></script>-->



<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-animate.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-sanitize.js"></script>
<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.5.0.js"></script>







<!--<script src="lib/ui-select/ui-select.js"></script>-->

<script src="lib/js/Blob.js"></script>
<script src="lib/js/FileSaver.js"></script>
<script src="lib/js/bootstrap-datepicker.min.js"></script>
<script src="lib/highcharts/highcharts.js"></script>
<script src="lib/highcharts/exporting.js"></script>
<script src="lib/highcharts/export-csv.js"></script>
<script src="app.js"></script>
</body>

</html>
